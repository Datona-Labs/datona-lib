

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>datona-blockchain &mdash; Datona-Lib 0.0.1a documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="datona-vault" href="datona-vault.html" />
    <link rel="prev" title="How To Use" href="howto.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Datona-Lib
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">User Documenation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="what.html">What Is Smart Data Access?</a></li>
<li class="toctree-l1"><a class="reference internal" href="howto.html">How To Use</a></li>
</ul>
<p class="caption"><span class="caption-text">API Specification</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">datona-blockchain</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#constants">Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="#class-permissions">Class Permissions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#properties">Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constructor">Constructor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#throws">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#canread">canRead</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#returns">Returns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#canwrite">canWrite</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id2">Returns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#canappend">canAppend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id3">Returns</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#isdirectory">isDirectory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id4">Returns</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#class-contract">Class Contract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id5">Constants</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">Properties</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">Constructor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id8">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id9">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#setaddress">setAddress</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id11">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id13">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#deploy">deploy</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id14">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#getowner">getOwner</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id18">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id21">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#hasexpired">hasExpired</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id23">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id26">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id27">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#getpermissions">getPermissions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id28">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id29">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id32">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id33">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id34">canRead</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id35">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id36">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id40">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id41">canWrite</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id42">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id43">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id46">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id47">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id48">canAppend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id49">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id50">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id53">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id54">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#getbytecode">getBytecode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id55">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id58">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id59">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#call">call</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id60">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id61">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id64">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id65">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#transact">transact</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id66">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id67">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id70">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id71">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#terminate">terminate</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id72">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id73">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id76">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id77">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#assertbytecode">assertBytecode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id78">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id79">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id82">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id83">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#assertowner">assertOwner</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id84">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id85">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id88">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id89">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#assertnotexpired">assertNotExpired</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id90">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id93">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id94">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#asserthasexpired">assertHasExpired</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id95">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id98">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id99">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#assertcanread">assertCanRead</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id100">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id101">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id104">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id105">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#assertcanwrite">assertCanWrite</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id106">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id107">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id110">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id111">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#assertcanappend">assertCanAppend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id112">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id113">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id116">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id117">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#class-genericsmartdataaccesscontract">Class GenericSmartDataAccessContract</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id118">Constructor</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id119">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id120">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id121">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#functions">Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#subscribe">subscribe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id123">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id124">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id125">Throws</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id126">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#unsubscribe">unsubscribe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id127">Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id128">Returns</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id129">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#close">close</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id130">Throws</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="datona-vault.html">datona-vault</a></li>
<li class="toctree-l1"><a class="reference internal" href="datona-crypto.html">datona-crypto</a></li>
<li class="toctree-l1"><a class="reference internal" href="datona-comms.html">datona-comms</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html">Core Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="types.html#application-layer-protocol">Application Layer Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="datona-errors.html">Errors</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Datona-Lib</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>datona-blockchain</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/datona-blockchain.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="datona-blockchain">
<span id="id1"></span><h1>datona-blockchain<a class="headerlink" href="#datona-blockchain" title="Permalink to this headline">¶</a></h1>
<p>Gives access to the Datona blockchain (Ethereum right now), providing functions to deploy, manage and access S-DACs.  Is designed to be used by both owner-end software (identity apps) and vault software.  Uses <a class="reference external" href="https://github.com/ethereum/web3.js">web3</a>.</p>
<div class="section" id="constants">
<h2>Constants<a class="headerlink" href="#constants" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ZERO_ADDRESS</span></code> <em>(Address)</em> = <code class="docutils literal notranslate"><span class="pre">&quot;0x0000000000000000000000000000000000000000&quot;</span></code></p></li>
</ul>
</div>
<div class="section" id="class-permissions">
<span id="permissions"></span><h2>Class Permissions<a class="headerlink" href="#class-permissions" title="Permalink to this headline">¶</a></h2>
<p>Encapsulates file/directory permissions returned by the <code class="docutils literal notranslate"><span class="pre">getPermissions</span></code> method of an SDAC.  Provides accessor functions to read properties of the permissions.</p>
<div class="section" id="properties">
<h3>Properties<a class="headerlink" href="#properties" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">permissions</span></code> <em>(byte)</em> - the raw permissions provided to the constructor.  Is expected to be of the form specified in the <a class="reference internal" href="types.html#sdacinterface"><span class="std std-ref">SDAC Interface</span></a>.</p></li>
</ul>
</div>
<div class="section" id="constructor">
<h3>Constructor<a class="headerlink" href="#constructor" title="Permalink to this headline">¶</a></h3>
<p>Decodes a raw permissions byte.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="nx">Permissions</span><span class="p">(</span><span class="nx">permissionsByte</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="parameters">
<h4>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">permissionsByte</span></code> <em>(byte or String)</em> - the raw permissions byte either as an integer or a string of the form <code class="docutils literal notranslate"><span class="pre">0xNN</span></code>.</p></li>
</ol>
</div>
<div class="section" id="throws">
<h4>Throws<a class="headerlink" href="#throws" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">TypeError</span></code> if the permissionsByte is a string and does not have the form <code class="docutils literal notranslate"><span class="pre">0xNN</span></code></p></li>
</ul>
</div>
<div class="section" id="example">
<h4>Example<a class="headerlink" href="#example" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="c1">// using string format</span>
<span class="kr">const</span> <span class="nx">permissions</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Permissions</span><span class="p">(</span><span class="s2">&quot;0x87&quot;</span><span class="p">);</span>

<span class="c1">// using byte returned from contract</span>
<span class="nx">myContract</span><span class="p">.</span><span class="nx">getPermissions</span><span class="p">(</span><span class="nx">myAddress</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">rawPermissions</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">permissions</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Permissions</span><span class="p">(</span><span class="nx">rawPermissions</span><span class="p">);</span>
      <span class="k">if</span> <span class="p">(</span><span class="nx">permissions</span><span class="p">.</span><span class="nx">canRead</span><span class="p">())</span> <span class="p">{</span> <span class="p">...</span>
      <span class="p">}</span>
  <span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="canread">
<h3>canRead<a class="headerlink" href="#canread" title="Permalink to this headline">¶</a></h3>
<p>Accesses the READ bit in the raw permissions.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">permissions</span><span class="p">.</span><span class="nx">canRead</span><span class="p">())</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<div class="section" id="returns">
<h4>Returns<a class="headerlink" href="#returns" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - true if the bit is set in the raw permissions.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="canwrite">
<h3>canWrite<a class="headerlink" href="#canwrite" title="Permalink to this headline">¶</a></h3>
<p>Accesses the WRITE bit in the raw permissions.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">permissions</span><span class="p">.</span><span class="nx">canWrite</span><span class="p">())</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id2">
<h4>Returns<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - true if the bit is set in the raw permissions.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="canappend">
<h3>canAppend<a class="headerlink" href="#canappend" title="Permalink to this headline">¶</a></h3>
<p>Accesses the APPEND bit in the raw permissions.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">permissions</span><span class="p">.</span><span class="nx">canAppend</span><span class="p">())</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id3">
<h4>Returns<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - true if the bit is set in the raw permissions.</p>
</div>
</div>
<hr class="docutils" />
<div class="section" id="isdirectory">
<h3>isDirectory<a class="headerlink" href="#isdirectory" title="Permalink to this headline">¶</a></h3>
<p>Accesses the DIRECTORY bit in the raw permissions.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="nx">permissions</span><span class="p">.</span><span class="nx">isDirectory</span><span class="p">())</span> <span class="p">{</span> <span class="p">...</span> <span class="p">}</span>
</pre></div>
</div>
<div class="section" id="id4">
<h4>Returns<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - true if the bit is set in the raw permissions.</p>
<hr class="docutils" />
</div>
</div>
</div>
<div class="section" id="class-contract">
<span id="contract"></span><h2>Class Contract<a class="headerlink" href="#class-contract" title="Permalink to this headline">¶</a></h2>
<p>Represents a Smart Data Access Contract on the blockchain.  Provides functions to interact with the contract.</p>
<div class="section" id="id5">
<h3>Constants<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h3>
<p>Bit masks for the permissions byte returned by a Smart Data Access Contract:</p>
<ul class="simple">
<li><p>static <code class="docutils literal notranslate"><span class="pre">NO_PERMISSIONS</span></code> <em>(byte)</em> = <code class="docutils literal notranslate"><span class="pre">0x00</span></code></p></li>
<li><p>static <code class="docutils literal notranslate"><span class="pre">ALL_PERMISSIONS</span></code> <em>(byte)</em> = <code class="docutils literal notranslate"><span class="pre">0x07</span></code>;</p></li>
<li><p>static <code class="docutils literal notranslate"><span class="pre">READ_BIT</span></code> <em>(byte)</em> = <code class="docutils literal notranslate"><span class="pre">0x04</span></code>;</p></li>
<li><p>static <code class="docutils literal notranslate"><span class="pre">WRITE_BIT</span></code> <em>(byte)</em> = <code class="docutils literal notranslate"><span class="pre">0x02</span></code>;</p></li>
<li><p>static <code class="docutils literal notranslate"><span class="pre">APPEND_BIT</span></code> <em>(byte)</em> = <code class="docutils literal notranslate"><span class="pre">0x01</span></code>;</p></li>
<li><p>static <code class="docutils literal notranslate"><span class="pre">DIRECTORY_BIT</span></code> <em>(byte)</em> = <code class="docutils literal notranslate"><span class="pre">0x80</span></code>;</p></li>
</ul>
<p>Reserved Addresses used by a Smart Data Access Contract:</p>
<ul class="simple">
<li><p>static <code class="docutils literal notranslate"><span class="pre">ROOT_DIRECTORY</span></code> <em>(Address)</em> = <code class="docutils literal notranslate"><span class="pre">&quot;0x0000000000000000000000000000000000000000&quot;</span></code>;</p></li>
</ul>
</div>
<div class="section" id="id6">
<h3>Properties<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> <em>(Address)</em> - the public blockchain address of the contract.  Will be <code class="docutils literal notranslate"><span class="pre">undefined</span></code> unless given in the constructor, set using <a class="reference internal" href="#setaddress">setAddress</a>, or deployed using the <a class="reference internal" href="#deploy">deploy</a> function.</p></li>
</ul>
</div>
<div class="section" id="id7">
<h3>Constructor<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<p>Creates a new Contract instance.  Connects with the blockchain (if not connected already).</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">abi</span><span class="p">,</span> <span class="p">[</span><span class="nx">address</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id8">
<h4>Parameters<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">abi</span></code> <em>(Object)</em> - The smart contract’s <a class="reference external" href="https://solidity.readthedocs.io/en/latest/abi-spec.html">abi</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> <em>(Address)</em> - (Optional) The address of the contract on the blockchain, if already deployed.  Exclude if constructing a new contract.  Note, the address can be set later via <a class="reference internal" href="#setaddress">setAddress</a> if preferred.</p></li>
</ol>
</div>
<div class="section" id="id9">
<h4>Throws<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if it can’t connect with the blockchain or the abi is invalid.</p></li>
</ul>
</div>
<div class="section" id="id10">
<h4>Example<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="setaddress">
<h3>setAddress<a class="headerlink" href="#setaddress" title="Permalink to this headline">¶</a></h3>
<p>Sets the address of this contract on the blockchain.  Can be used as an alternative to passing it in the constructor.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">setAddress</span><span class="p">(</span><span class="nx">address</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id11">
<h4>Parameters<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> <em>(Address)</em> - address of the contract on the blockchain</p></li>
</ol>
</div>
<div class="section" id="id12">
<h4>Throws<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the address is already set</p></li>
</ul>
</div>
<div class="section" id="id13">
<h4>Example<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">);</span>
<span class="nx">contract</span><span class="p">.</span><span class="nx">setAddress</span><span class="p">(</span><span class="s2">&quot;0xfb3e6dd29d01c1b5b99e46db3fe26df1138b73d1&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="deploy">
<h3>deploy<a class="headerlink" href="#deploy" title="Permalink to this headline">¶</a></h3>
<p>Deploys this contract on the blockchain.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">deploy</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">bytecode</span><span class="p">,</span> <span class="p">[</span><span class="nx">constructorArgs</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id14">
<h4>Parameters<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code> <em>(Key)</em> - the Datona Key object used to sign the transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bytecode</span></code> <em>(string)</em> - the contract creation bytecode (in hex with no leading 0x)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">constructorArgs</span></code> <em>(Array)</em> - (Optional) arguments to pass to the contract’s constructor</p></li>
</ol>
</div>
<div class="section" id="id15">
<h4>Returns<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to deploy the contract on the blockchain, returning the contract address.</p>
<div class="section" id="resolves-with">
<h5>Resolves With<a class="headerlink" href="#resolves-with" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Address</span></code> - The blockchain address of the deployed contract.  Resolves after the transaction has been mined.</p>
</div>
<div class="section" id="rejects-with">
<h5>Rejects With<a class="headerlink" href="#rejects-with" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if deployment failed.  If the blockchain VM reverted the transaction then examine the blockchain receipt in the error details.</p></li>
</ul>
</div>
</div>
<div class="section" id="id16">
<h4>Throws<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the bytecode is invalid</p></li>
</ul>
</div>
<div class="section" id="id17">
<h4>Example<a class="headerlink" href="#id17" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">contractAddress</span><span class="p">;</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">deploy</span><span class="p">(</span><span class="nx">myKey</span><span class="p">,</span> <span class="nx">myContract</span><span class="p">.</span><span class="nx">bytecode</span><span class="p">,</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="nx">requesterAddress</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">address</span><span class="p">){</span>
    <span class="nx">contractAddress</span> <span class="o">=</span> <span class="nx">address</span><span class="p">;</span>
    <span class="kr">const</span> <span class="nx">vault</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">datona</span><span class="p">.</span><span class="nx">vault</span><span class="p">.</span><span class="nx">RemoteVault</span><span class="p">(</span> <span class="nx">vaultUrl</span><span class="p">,</span> <span class="nx">contractAddress</span><span class="p">,</span> <span class="nx">myKey</span> <span class="p">);</span>
    <span class="k">return</span> <span class="nx">vault</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">&quot;Hello World&quot;</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="nx">error</span><span class="p">);</span>
  <span class="p">});</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="getowner">
<h3>getOwner<a class="headerlink" href="#getowner" title="Permalink to this headline">¶</a></h3>
<p>Gets the owner of the contract</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">getOwner</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="id18">
<h4>Returns<a class="headerlink" href="#id18" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return owner’s address</p>
<div class="section" id="id19">
<h5>Resolves With<a class="headerlink" href="#id19" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Address</span></code> - The owner’s address</p>
</div>
<div class="section" id="id20">
<h5>Rejects With<a class="headerlink" href="#id20" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract owner could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id21">
<h4>Throws<a class="headerlink" href="#id21" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id22">
<h4>Example<a class="headerlink" href="#id22" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">getOwner</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="hasexpired">
<h3>hasExpired<a class="headerlink" href="#hasexpired" title="Permalink to this headline">¶</a></h3>
<p>Resolves true if the smart data access contract has expired.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">hasExpired</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="id23">
<h4>Returns<a class="headerlink" href="#id23" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return the expiry status</p>
<div class="section" id="id24">
<h5>Resolves With<a class="headerlink" href="#id24" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - True if the contract has expired.  False otherwise.</p>
</div>
<div class="section" id="id25">
<h5>Rejects With<a class="headerlink" href="#id25" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the expiry status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id26">
<h4>Throws<a class="headerlink" href="#id26" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id27">
<h4>Example<a class="headerlink" href="#id27" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">hasExpired</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">expired</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">expired</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;contract has expired&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="getpermissions">
<h3>getPermissions<a class="headerlink" href="#getpermissions" title="Permalink to this headline">¶</a></h3>
<p>Promises to call the contract’s getPermissions method and return the permissions byte as a <a class="reference internal" href="#permissions">Permissions</a> object.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">getPermissions</span><span class="p">(</span><span class="nx">requester</span><span class="p">,</span> <span class="p">[</span><span class="nx">file</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id28">
<h4>Parameters<a class="headerlink" href="#id28" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">requester</span></code> <em>(Address)</em> - the address of the requester that wants to read the data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> <em>(Address)</em> - (Optional) the specific file to check.  Defaults to the <code class="docutils literal notranslate"><span class="pre">ROOT_DIRECTORY</span></code> if not given.</p></li>
</ol>
</div>
<div class="section" id="id29">
<h4>Returns<a class="headerlink" href="#id29" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return the permissions byte encapsulated in a Permissions object</p>
<div class="section" id="id30">
<h5>Resolves With<a class="headerlink" href="#id30" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Permissions</span></code> - the <a class="reference internal" href="#permissions">Permissions</a> object representing the permissions byte returned by the SDAC.</p>
</div>
<div class="section" id="id31">
<h5>Rejects With<a class="headerlink" href="#id31" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the permission status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id32">
<h4>Throws<a class="headerlink" href="#id32" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id33">
<h4>Example<a class="headerlink" href="#id33" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileId</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000001&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">vaultUrl</span> <span class="o">=</span> <span class="s2">&quot;file://datonavault.com:8124&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">vaultOwner</span> <span class="o">=</span> <span class="s2">&quot;0x288b32F2653C1d72043d240A7F938a114Ab69584&quot;</span><span class="p">;</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">getPermissions</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">fileId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">permissions</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">permissions</span><span class="p">.</span><span class="nx">canRead</span><span class="p">()</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="nx">permissions</span><span class="p">.</span><span class="nx">isDirectory</span><span class="p">())</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">vault</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">datona</span><span class="p">.</span><span class="nx">vault</span><span class="p">.</span><span class="nx">RemoteVault</span><span class="p">(</span> <span class="nx">vaultUrl</span><span class="p">,</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">myKey</span><span class="p">,</span> <span class="nx">vaultOwner</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">vault</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">fileId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="id34">
<h3>canRead<a class="headerlink" href="#id34" title="Permalink to this headline">¶</a></h3>
<p>Resolves true if the owner of the given address is permitted to read the data from a given file in the vault controlled by this contract.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">canRead</span><span class="p">(</span><span class="nx">requester</span><span class="p">,</span> <span class="p">[</span><span class="nx">file</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id35">
<h4>Parameters<a class="headerlink" href="#id35" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">requester</span></code> <em>(Address)</em> - the address of the requester that wants to read the data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> <em>(Address)</em> - (Optional) the specific file to check.  Defaults to the <code class="docutils literal notranslate"><span class="pre">ROOT_DIRECTORY</span></code> if not given.</p></li>
</ol>
</div>
<div class="section" id="id36">
<h4>Returns<a class="headerlink" href="#id36" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return the permission status</p>
<div class="section" id="id37">
<h5>Resolves With<a class="headerlink" href="#id37" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - True if the address is permitted to read the file.  False otherwise.</p>
</div>
<div class="section" id="id38">
<h5>Rejects With<a class="headerlink" href="#id38" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the permission status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id39">
<h4>Throws<a class="headerlink" href="#id39" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id40">
<h4>Example<a class="headerlink" href="#id40" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileId</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000001&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">vaultUrl</span> <span class="o">=</span> <span class="s2">&quot;file://datonavault.com:8124&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">vaultOwner</span> <span class="o">=</span> <span class="s2">&quot;0x288b32F2653C1d72043d240A7F938a114Ab69584&quot;</span><span class="p">;</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">canRead</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">fileId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">permitted</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">permitted</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">vault</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">datona</span><span class="p">.</span><span class="nx">vault</span><span class="p">.</span><span class="nx">RemoteVault</span><span class="p">(</span> <span class="nx">vaultUrl</span><span class="p">,</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">myKey</span><span class="p">,</span> <span class="nx">vaultOwner</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">vault</span><span class="p">.</span><span class="nx">read</span><span class="p">(</span><span class="nx">fileId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="id41">
<h3>canWrite<a class="headerlink" href="#id41" title="Permalink to this headline">¶</a></h3>
<p>Resolves true if the owner of the given address is permitted to write to (or overwrite) a given file or directory in the vault controlled by this contract.</p>
<p>If permitted to write to a directory, the user can add a new file to the directory or can overwrite any file within that directory.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">canWrite</span><span class="p">(</span><span class="nx">requester</span><span class="p">,</span> <span class="p">[</span><span class="nx">file</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id42">
<h4>Parameters<a class="headerlink" href="#id42" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">requester</span></code> <em>(Address)</em> - the address of the requester that wants to write to the file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> <em>(Address)</em> - (Optional) the specific file or directory to check.  Defaults to the <code class="docutils literal notranslate"><span class="pre">ROOT_DIRECTORY</span></code> if not given.</p></li>
</ol>
</div>
<div class="section" id="id43">
<h4>Returns<a class="headerlink" href="#id43" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return the permission status</p>
<div class="section" id="id44">
<h5>Resolves With<a class="headerlink" href="#id44" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - True if the address is permitted to write to the file.  False otherwise.</p>
</div>
<div class="section" id="id45">
<h5>Rejects With<a class="headerlink" href="#id45" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the permission status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id46">
<h4>Throws<a class="headerlink" href="#id46" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id47">
<h4>Example<a class="headerlink" href="#id47" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileId</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000001&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">vaultUrl</span> <span class="o">=</span> <span class="s2">&quot;file://datonavault.com:8124&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">vaultOwner</span> <span class="o">=</span> <span class="s2">&quot;0x288b32F2653C1d72043d240A7F938a114Ab69584&quot;</span><span class="p">;</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">canWrite</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">fileId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">permitted</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">permitted</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">vault</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">datona</span><span class="p">.</span><span class="nx">vault</span><span class="p">.</span><span class="nx">RemoteVault</span><span class="p">(</span> <span class="nx">vaultUrl</span><span class="p">,</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">myKey</span><span class="p">,</span> <span class="nx">vaultOwner</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">vault</span><span class="p">.</span><span class="nx">write</span><span class="p">(</span><span class="s2">&quot;hello world&quot;</span><span class="p">,</span> <span class="nx">fileId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="id48">
<h3>canAppend<a class="headerlink" href="#id48" title="Permalink to this headline">¶</a></h3>
<p>Resolves true if the owner of the given address is permitted to append to (or overwrite) a given file or directory in the vault controlled by this contract.</p>
<p>If permitted to append to a directory, the user can add a new file to the directory or can append to any file within that directory. It does not mean that existing files in that directory are (over)writable - use canWrite to determine this.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">canAppend</span><span class="p">(</span><span class="nx">requester</span><span class="p">,</span> <span class="p">[</span><span class="nx">file</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id49">
<h4>Parameters<a class="headerlink" href="#id49" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">requester</span></code> <em>(Address)</em> - the address of the requester that wants to append to the file</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> <em>(Address)</em> - (Optional) the specific file to check.  Defaults to the <code class="docutils literal notranslate"><span class="pre">ROOT_DIRECTORY</span></code> if not given.</p></li>
</ol>
</div>
<div class="section" id="id50">
<h4>Returns<a class="headerlink" href="#id50" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return the permission status</p>
<div class="section" id="id51">
<h5>Resolves With<a class="headerlink" href="#id51" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">boolean</span></code> - True if the address is permitted to append to the file.  False otherwise.</p>
</div>
<div class="section" id="id52">
<h5>Rejects With<a class="headerlink" href="#id52" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the permission status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id53">
<h4>Throws<a class="headerlink" href="#id53" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id54">
<h4>Example<a class="headerlink" href="#id54" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileId</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000001&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">vaultUrl</span> <span class="o">=</span> <span class="s2">&quot;file://datonavault.com:8124&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">vaultOwner</span> <span class="o">=</span> <span class="s2">&quot;0x288b32F2653C1d72043d240A7F938a114Ab69584&quot;</span><span class="p">;</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">canAppend</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">fileId</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">permitted</span><span class="p">){</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">permitted</span><span class="p">)</span> <span class="p">{</span>
      <span class="kr">const</span> <span class="nx">vault</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">datona</span><span class="p">.</span><span class="nx">vault</span><span class="p">.</span><span class="nx">RemoteVault</span><span class="p">(</span> <span class="nx">vaultUrl</span><span class="p">,</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">myKey</span><span class="p">,</span> <span class="nx">vaultOwner</span> <span class="p">);</span>
      <span class="k">return</span> <span class="nx">vault</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="s2">&quot;some more info&quot;</span><span class="p">,</span> <span class="nx">fileId</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="getbytecode">
<h3>getBytecode<a class="headerlink" href="#getbytecode" title="Permalink to this headline">¶</a></h3>
<p>Gets the runtime bytecode of this contract from the blockchain</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">getBytecode</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="id55">
<h4>Returns<a class="headerlink" href="#id55" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return the bytecode</p>
<div class="section" id="id56">
<h5>Resolves With<a class="headerlink" href="#id56" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">String</span></code> - The runtime bytecode (in hex)</p>
</div>
<div class="section" id="id57">
<h5>Rejects With<a class="headerlink" href="#id57" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the bytecode could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id58">
<h4>Throws<a class="headerlink" href="#id58" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id59">
<h4>Example<a class="headerlink" href="#id59" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">getBytecode</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="o">&gt;</span> <span class="mi">60806040526004361061009</span><span class="nx">e576000357c0100000000000</span><span class="p">...</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="call">
<h3>call<a class="headerlink" href="#call" title="Permalink to this headline">¶</a></h3>
<p>Calls the given view or pure contract method with the given arguments.  Use <a class="reference internal" href="#transact">transact</a> to call a state-modifying method instead.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">call</span><span class="p">(</span><span class="nx">method</span><span class="p">,</span> <span class="p">[</span><span class="nx">args</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id60">
<h4>Parameters<a class="headerlink" href="#id60" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code> <em>(String)</em> - the name of the contract method to call</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">args</span></code> <em>(Array)</em> - (Optional) arguments to pass to the method</p></li>
</ol>
</div>
<div class="section" id="id61">
<h4>Returns<a class="headerlink" href="#id61" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return the output from the method.</p>
<div class="section" id="id62">
<h5>Resolves With<a class="headerlink" href="#id62" title="Permalink to this headline">¶</a></h5>
<p>The datatype that the contract method returns, e.g. <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code>.</p>
</div>
<div class="section" id="id63">
<h5>Rejects With<a class="headerlink" href="#id63" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the call failed.  Examine the error details for more information.</p></li>
</ul>
</div>
</div>
<div class="section" id="id64">
<h4>Throws<a class="headerlink" href="#id64" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address, the method does not exist or the method arguments are invalid.</p></li>
</ul>
</div>
<div class="section" id="id65">
<h4>Example<a class="headerlink" href="#id65" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="s2">&quot;isPermitted&quot;</span><span class="p">,</span> <span class="p">[</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">])</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">permitted</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;isPermitted returned &quot;</span><span class="o">+</span><span class="nx">permitted</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
<span class="o">&gt;</span> <span class="nx">isPermitted</span> <span class="nx">returned</span> <span class="kc">true</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="transact">
<h3>transact<a class="headerlink" href="#transact" title="Permalink to this headline">¶</a></h3>
<p>Calls the given state-modifying contract method with the given arguments.  Use <a class="reference internal" href="#call">call</a> to call a view or pure method instead.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">call</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">method</span><span class="p">,</span> <span class="p">[</span><span class="nx">args</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id66">
<h4>Parameters<a class="headerlink" href="#id66" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code> <em>(Key)</em> - the key used to sign the transaction</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">method</span></code> <em>(String)</em> - the name of the contract method to call</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">args</span></code> <em>(Array)</em> - (Optional) arguments to pass to the method</p></li>
</ol>
</div>
<div class="section" id="id67">
<h4>Returns<a class="headerlink" href="#id67" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to return the output from the method.</p>
<div class="section" id="id68">
<h5>Resolves With<a class="headerlink" href="#id68" title="Permalink to this headline">¶</a></h5>
<p>The datatype that the contract method returns, e.g. <code class="docutils literal notranslate"><span class="pre">string</span></code>, <code class="docutils literal notranslate"><span class="pre">boolean</span></code>, <code class="docutils literal notranslate"><span class="pre">integer</span></code>.  Resolves after the transaction has been mined.</p>
</div>
<div class="section" id="id69">
<h5>Rejects With<a class="headerlink" href="#id69" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the call failed.  Examine the error details for more information.</p></li>
</ul>
</div>
</div>
<div class="section" id="id70">
<h4>Throws<a class="headerlink" href="#id70" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address, the method does not exist or the method arguments are invalid.</p></li>
</ul>
</div>
<div class="section" id="id71">
<h4>Example<a class="headerlink" href="#id71" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">transact</span><span class="p">(</span><span class="nx">myKey</span><span class="p">,</span> <span class="s2">&quot;terminate&quot;</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;contract has been terminated&quot;</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="terminate">
<h3>terminate<a class="headerlink" href="#terminate" title="Permalink to this headline">¶</a></h3>
<p>Terminates this contract by calling it’s <code class="docutils literal notranslate"><span class="pre">terminate</span></code> method.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">terminate</span><span class="p">(</span><span class="nx">key</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id72">
<h4>Parameters<a class="headerlink" href="#id72" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">key</span></code> <em>(Key)</em> - the key used to sign the transaction</p></li>
</ol>
</div>
<div class="section" id="id73">
<h4>Returns<a class="headerlink" href="#id73" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to attempt to terminate the contract</p>
<div class="section" id="id74">
<h5>Resolves With<a class="headerlink" href="#id74" title="Permalink to this headline">¶</a></h5>
<p>Resolves with no data if successful.  Resolves after the transaction has been mined.</p>
</div>
<div class="section" id="id75">
<h5>Rejects With<a class="headerlink" href="#id75" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract could not be terminated.</p></li>
</ul>
</div>
</div>
<div class="section" id="id76">
<h4>Throws<a class="headerlink" href="#id76" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id77">
<h4>Example<a class="headerlink" href="#id77" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">terminate</span><span class="p">()</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;contract terminated&quot;</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="assertbytecode">
<h3>assertBytecode<a class="headerlink" href="#assertbytecode" title="Permalink to this headline">¶</a></h3>
<p>Asserts that the contract’s runtime bytecode equals the expected bytecode given.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">assertBytecode</span><span class="p">(</span><span class="nx">expectedBytecode</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id78">
<h4>Parameters<a class="headerlink" href="#id78" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expectedBytecode</span></code> <em>(String)</em> - the bytecode to test</p></li>
</ol>
</div>
<div class="section" id="id79">
<h4>Returns<a class="headerlink" href="#id79" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to resolve if the bytecodes match, and to reject if not.</p>
<div class="section" id="id80">
<h5>Resolves With<a class="headerlink" href="#id80" title="Permalink to this headline">¶</a></h5>
<p>Resolves with no data if the contract’s bytecode matches the bytecode given.</p>
</div>
<div class="section" id="id81">
<h5>Rejects With<a class="headerlink" href="#id81" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ContractTypeError</span></code> - if the bytecodes do not match</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the bytecode could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id82">
<h4>Throws<a class="headerlink" href="#id82" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id83">
<h4>Example<a class="headerlink" href="#id83" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">assertBytecode</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">runtimeBytecode</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;contract bytecode is as expected&quot;</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="assertowner">
<h3>assertOwner<a class="headerlink" href="#assertowner" title="Permalink to this headline">¶</a></h3>
<p>Asserts that the contract’s runtime bytecode equals the expected bytecode given.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">assertOwner</span><span class="p">(</span><span class="nx">expectedOwner</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id84">
<h4>Parameters<a class="headerlink" href="#id84" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expectedOwner</span></code> <em>(Address)</em> - the owner address to test</p></li>
</ol>
</div>
<div class="section" id="id85">
<h4>Returns<a class="headerlink" href="#id85" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to resolve if the addresses match, and to reject if not.</p>
<div class="section" id="id86">
<h5>Resolves With<a class="headerlink" href="#id86" title="Permalink to this headline">¶</a></h5>
<p>Resolves with no data if the contract’s owner matches the address given.</p>
</div>
<div class="section" id="id87">
<h5>Rejects With<a class="headerlink" href="#id87" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ContractOwnerError</span></code> - if the owner does not match</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the owner could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id88">
<h4>Throws<a class="headerlink" href="#id88" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id89">
<h4>Example<a class="headerlink" href="#id89" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">assertOwner</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;I am the owner of contract &quot;</span><span class="o">+</span><span class="nx">contract</span><span class="p">.</span><span class="nx">address</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="assertnotexpired">
<h3>assertNotExpired<a class="headerlink" href="#assertnotexpired" title="Permalink to this headline">¶</a></h3>
<p>Resolves provided the contract has not expired.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">assertNotExpired</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="id90">
<h4>Returns<a class="headerlink" href="#id90" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to resolve if the contract has not expired, and to reject if not.</p>
<div class="section" id="id91">
<h5>Resolves With<a class="headerlink" href="#id91" title="Permalink to this headline">¶</a></h5>
<p>Resolves with no data if the contract has not expired.</p>
</div>
<div class="section" id="id92">
<h5>Rejects With<a class="headerlink" href="#id92" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ContractExpiryError</span></code> - if the contract has expired</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the expiry status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id93">
<h4>Throws<a class="headerlink" href="#id93" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id94">
<h4>Example<a class="headerlink" href="#id94" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">assertOwner</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertNotExpired</span> <span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="nx">updateMyData</span> <span class="p">)</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="asserthasexpired">
<h3>assertHasExpired<a class="headerlink" href="#asserthasexpired" title="Permalink to this headline">¶</a></h3>
<p>Resolves provided the contract has expired.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">assertNotExpired</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="id95">
<h4>Returns<a class="headerlink" href="#id95" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to resolve if the contract has expired, and to reject if not.</p>
<div class="section" id="id96">
<h5>Resolves With<a class="headerlink" href="#id96" title="Permalink to this headline">¶</a></h5>
<p>Resolves with no data if the contract has expired.</p>
</div>
<div class="section" id="id97">
<h5>Rejects With<a class="headerlink" href="#id97" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ContractExpiryError</span></code> - if the contract has not expired</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the expiry status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id98">
<h4>Throws<a class="headerlink" href="#id98" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id99">
<h4>Example<a class="headerlink" href="#id99" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">myContractAddress</span><span class="p">);</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">terminate</span><span class="p">(</span><span class="nx">myKey</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertHasExpired</span> <span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Double checked. Contract has been terminated.&quot;</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="assertcanread">
<h3>assertCanRead<a class="headerlink" href="#assertcanread" title="Permalink to this headline">¶</a></h3>
<p>Resolves provided the given address is permitted to read the given file or directory in the vault controlled by this contract.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">assertCanRead</span><span class="p">(</span><span class="nx">requester</span><span class="p">,</span> <span class="p">[</span><span class="nx">file</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id100">
<h4>Parameters<a class="headerlink" href="#id100" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">requester</span></code> <em>(Address)</em> - the address of the requester that wants to read the data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> <em>(Address)</em> - (Optional) the specific file to check.  Defaults to the <code class="docutils literal notranslate"><span class="pre">ROOT_DIRECTORY</span></code> if not given.</p></li>
</ol>
</div>
<div class="section" id="id101">
<h4>Returns<a class="headerlink" href="#id101" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to resolve if the given address is permitted to read the given file, and to reject if not.</p>
<div class="section" id="id102">
<h5>Resolves With<a class="headerlink" href="#id102" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Permissions</span></code> - the <a class="reference internal" href="#permissions">Permissions</a> object representing the permissions byte returned by the SDAC. Only resolves if the requester is permitted.</p>
</div>
<div class="section" id="id103">
<h5>Rejects With<a class="headerlink" href="#id103" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PermissionError</span></code> - if permission is not granted</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the expiry status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id104">
<h4>Throws<a class="headerlink" href="#id104" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id105">
<h4>Example<a class="headerlink" href="#id105" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">expectedContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">expectedContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">contractAddress</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">fileId</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000001&quot;</span><span class="p">;</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">assertBytecode</span><span class="p">(</span><span class="nx">expectedContract</span><span class="p">.</span><span class="nx">runtimeBytecode</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertOwner</span><span class="p">(</span><span class="nx">customer</span><span class="p">.</span><span class="nx">address</span><span class="p">)</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertCanRead</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">fileId</span><span class="p">)</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Confirmed customer&#39;s contract is valid&quot;</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="assertcanwrite">
<h3>assertCanWrite<a class="headerlink" href="#assertcanwrite" title="Permalink to this headline">¶</a></h3>
<p>Resolves provided the given address is permitted to write to the given file or directory in the vault controlled by this contract.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">assertCanWrite</span><span class="p">(</span><span class="nx">requester</span><span class="p">,</span> <span class="p">[</span><span class="nx">file</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id106">
<h4>Parameters<a class="headerlink" href="#id106" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">requester</span></code> <em>(Address)</em> - the address of the requester that wants to write the data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> <em>(Address)</em> - (Optional) the specific file to check.  Defaults to the <code class="docutils literal notranslate"><span class="pre">ROOT_DIRECTORY</span></code> if not given.</p></li>
</ol>
</div>
<div class="section" id="id107">
<h4>Returns<a class="headerlink" href="#id107" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to resolve if the given address is permitted to write to the given file, and to reject if not.</p>
<div class="section" id="id108">
<h5>Resolves With<a class="headerlink" href="#id108" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Permissions</span></code> - the <a class="reference internal" href="#permissions">Permissions</a> object representing the permissions byte returned by the SDAC. Only resolves if the requester is permitted.</p>
</div>
<div class="section" id="id109">
<h5>Rejects With<a class="headerlink" href="#id109" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PermissionError</span></code> - if permission is not granted</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the expiry status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id110">
<h4>Throws<a class="headerlink" href="#id110" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id111">
<h4>Example<a class="headerlink" href="#id111" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">expectedContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">expectedContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">contractAddress</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">ownersFile</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000001&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">resultsFile</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000002&quot;</span><span class="p">;</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">assertBytecode</span><span class="p">(</span><span class="nx">expectedContract</span><span class="p">.</span><span class="nx">runtimeBytecode</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertOwner</span><span class="p">(</span><span class="nx">customer</span><span class="p">.</span><span class="nx">address</span><span class="p">)</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertCanRead</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">ownersFile</span><span class="p">)</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertCanWrite</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">resultsFile</span><span class="p">)</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Confirmed customer&#39;s contract is valid&quot;</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="assertcanappend">
<h3>assertCanAppend<a class="headerlink" href="#assertcanappend" title="Permalink to this headline">¶</a></h3>
<p>Resolves provided the given address is permitted to append to the given file or directory in the vault controlled by this contract.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">assertCanAppend</span><span class="p">(</span><span class="nx">requester</span><span class="p">,</span> <span class="p">[</span><span class="nx">file</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id112">
<h4>Parameters<a class="headerlink" href="#id112" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">requester</span></code> <em>(Address)</em> - the address of the requester that wants to append the data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">file</span></code> <em>(Address)</em> - (Optional) the specific file to check.  Defaults to the <code class="docutils literal notranslate"><span class="pre">ROOT_DIRECTORY</span></code> if not given.</p></li>
</ol>
</div>
<div class="section" id="id113">
<h4>Returns<a class="headerlink" href="#id113" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Promise</span></code> - A promise to resolve if the given address is permitted to append to the given file, and to reject if not.</p>
<div class="section" id="id114">
<h5>Resolves With<a class="headerlink" href="#id114" title="Permalink to this headline">¶</a></h5>
<p><code class="docutils literal notranslate"><span class="pre">Permissions</span></code> - the <a class="reference internal" href="#permissions">Permissions</a> object representing the permissions byte returned by the SDAC. Only resolves if the requester is permitted.</p>
</div>
<div class="section" id="id115">
<h5>Rejects With<a class="headerlink" href="#id115" title="Permalink to this headline">¶</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">PermissionError</span></code> - if permission is not granted</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the expiry status could not be retrieved from the blockchain.</p></li>
</ul>
</div>
</div>
<div class="section" id="id116">
<h4>Throws<a class="headerlink" href="#id116" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the contract hasn’t been deployed or mapped to a blockchain address.</p></li>
</ul>
</div>
<div class="section" id="id117">
<h4>Example<a class="headerlink" href="#id117" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">expectedContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">expectedContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">customer</span><span class="p">.</span><span class="nx">contractAddress</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">ownersFile</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000001&quot;</span><span class="p">;</span>
<span class="kr">const</span> <span class="nx">logFile</span> <span class="o">=</span> <span class="s2">&quot;0x0000000000000000000000000000000000000002&quot;</span><span class="p">;</span>

<span class="nx">contract</span><span class="p">.</span><span class="nx">assertBytecode</span><span class="p">(</span><span class="nx">expectedContract</span><span class="p">.</span><span class="nx">runtimeBytecode</span><span class="p">)</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertOwner</span><span class="p">(</span><span class="nx">customer</span><span class="p">.</span><span class="nx">address</span><span class="p">)</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertCanRead</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">ownersFile</span><span class="p">)</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span> <span class="k">return</span> <span class="nx">contract</span><span class="p">.</span><span class="nx">assertCanAppend</span><span class="p">(</span><span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">,</span> <span class="nx">logFile</span><span class="p">)</span> <span class="p">})</span>
  <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;Confirmed customer&#39;s contract is valid&quot;</span><span class="p">);</span>
  <span class="p">})</span>
  <span class="p">.</span><span class="k">catch</span><span class="p">(</span><span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">);</span>
</pre></div>
</div>
<hr class="docutils" />
</div>
</div>
</div>
<div class="section" id="class-genericsmartdataaccesscontract">
<span id="genericsmartdataaccesscontract"></span><h2>Class GenericSmartDataAccessContract<a class="headerlink" href="#class-genericsmartdataaccesscontract" title="Permalink to this headline">¶</a></h2>
<p>Instance of <a class="reference internal" href="#contract">Contract</a> providing an interface to any Smart Data Access Contract.  Maps to a contract at the given address using the standard <a class="reference internal" href="types.html#sdacinterface"><span class="std std-ref">SDAC Interface</span></a> ABI.</p>
<div class="section" id="id118">
<h3>Constructor<a class="headerlink" href="#id118" title="Permalink to this headline">¶</a></h3>
<p>Creates a new Contract instance.  Connects with the blockchain (if not connected already).</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="k">new</span> <span class="nx">GenericSmartDataAccessContract</span><span class="p">(</span><span class="nx">address</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id119">
<h4>Parameters<a class="headerlink" href="#id119" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">address</span></code> <em>(Address)</em> - The address of the contract on the blockchain.</p></li>
</ol>
</div>
<div class="section" id="id120">
<h4>Throws<a class="headerlink" href="#id120" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if it can’t connect with the blockchain.</p></li>
</ul>
</div>
<div class="section" id="id121">
<h4>Example<a class="headerlink" href="#id121" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">GenericSmartDataAccessContract</span><span class="p">(</span><span class="nx">customer</span><span class="p">.</span><span class="nx">contractAddress</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="functions">
<h2>Functions<a class="headerlink" href="#functions" title="Permalink to this headline">¶</a></h2>
<div class="section" id="subscribe">
<span id="id122"></span><h3>subscribe<a class="headerlink" href="#subscribe" title="Permalink to this headline">¶</a></h3>
<p>Subscribes the client to receive notification of a new contract deployed to the blockchain with the given code hash.  Optionally, the client can receive notification only if the given address is permitted to access the data controlled by the contract.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">subscribe</span><span class="p">(</span><span class="nx">bytecodeHash</span><span class="p">,</span> <span class="nx">callback</span><span class="p">,</span> <span class="p">[</span><span class="nx">permittedAddress</span><span class="p">]);</span>
</pre></div>
</div>
<div class="section" id="id123">
<h4>Parameters<a class="headerlink" href="#id123" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bytecodeHash</span></code> <em>(Hash)</em> - hash of the runtime bytecode of the new contract to monitor for</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">callback</span></code> <em>(function)</em> - function to call if new contract is found: <code class="docutils literal notranslate"><span class="pre">function</span> <span class="pre">callback(contractAddress,</span> <span class="pre">bytecodeHash)</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">permittedAddress</span></code> <em>(String)</em> - (Optional) address to check if permitted</p></li>
</ol>
<p><strong>callback parameters</strong></p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">contractAddress</span></code> <em>(Address)</em> - blockchain address of the new contract</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">bytecodeHash</span></code> <em>(Hash)</em> - (Optional) hash of the runtime bytecode of the new contract.  Allows the same callback to be used for multiple subscriptions.</p></li>
</ol>
</div>
<div class="section" id="id124">
<h4>Returns<a class="headerlink" href="#id124" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">Hash</span></code> - unique subscription id (can be used to <a class="reference internal" href="#unsubscribe">unsubscribe</a> later).</p>
</div>
<div class="section" id="id125">
<h4>Throws<a class="headerlink" href="#id125" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if web3 cannot be subscribed to</p></li>
</ul>
</div>
<div class="section" id="id126">
<h4>Example<a class="headerlink" href="#id126" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">subscription</span> <span class="o">=</span> <span class="nx">subscribe</span><span class="p">(</span><span class="nx">datona</span><span class="p">.</span><span class="nx">crypto</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">runtimeBytecode</span><span class="p">),</span> <span class="nx">registerNewCustomer</span><span class="p">,</span> <span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">);</span>

<span class="kd">function</span> <span class="nx">registerNewCustomer</span><span class="p">(</span><span class="nx">contractAddress</span><span class="p">)</span> <span class="p">{</span>
  <span class="kr">const</span> <span class="nx">contract</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Contract</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">abi</span><span class="p">,</span> <span class="nx">contractAddress</span><span class="p">);</span>
  <span class="nx">contract</span><span class="p">.</span><span class="nx">getOwner</span><span class="p">()</span>
    <span class="p">.</span><span class="nx">then</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">ownerAddress</span><span class="p">){</span>
      <span class="kr">const</span> <span class="nx">newCustomer</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">owner</span><span class="o">:</span> <span class="nx">ownerAddress</span><span class="p">,</span> <span class="nx">contract</span><span class="o">:</span> <span class="nx">contractAddress</span> <span class="p">};</span>
      <span class="nx">customers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newCustomer</span><span class="p">);</span>
    <span class="p">})</span>
    <span class="p">.</span><span class="k">catch</span><span class="p">(</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">){</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;Couldn&#39;t get owner of new customer contract.  Try again later. &quot;</span><span class="o">+</span><span class="nx">contractAddress</span><span class="o">+</span><span class="s2">&quot; - &quot;</span><span class="o">+</span><span class="nx">error</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
      <span class="kr">const</span> <span class="nx">newCustomer</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">owner</span><span class="o">:</span> <span class="kc">undefined</span><span class="p">,</span> <span class="nx">contract</span><span class="o">:</span> <span class="nx">contractAddress</span> <span class="p">};</span>
      <span class="nx">customers</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="nx">newCustomer</span><span class="p">);</span>
    <span class="p">});</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="unsubscribe">
<h3>unsubscribe<a class="headerlink" href="#unsubscribe" title="Permalink to this headline">¶</a></h3>
<p>Unsubscribes a previous subscription.  The subscription is identified by the subscription id returned from the original call to <a class="reference internal" href="#subscribe">subscribe</a>.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">unsubscribe</span><span class="p">(</span><span class="nx">subscriptionId</span><span class="p">);</span>
</pre></div>
</div>
<div class="section" id="id127">
<h4>Parameters<a class="headerlink" href="#id127" title="Permalink to this headline">¶</a></h4>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">subscriptionId</span></code> <em>(Hash)</em> - the subscription to unsubscribe</p></li>
</ol>
</div>
<div class="section" id="id128">
<h4>Returns<a class="headerlink" href="#id128" title="Permalink to this headline">¶</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">uint</span></code> - the number of subscriptions unsubscribed.</p>
</div>
<div class="section" id="id129">
<h4>Example<a class="headerlink" href="#id129" title="Permalink to this headline">¶</a></h4>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="kr">const</span> <span class="nx">myContract</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s2">&quot;../contracts/myContract.json&quot;</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">subscription</span> <span class="o">=</span> <span class="nx">subscribe</span><span class="p">(</span><span class="nx">datona</span><span class="p">.</span><span class="nx">crypto</span><span class="p">.</span><span class="nx">hash</span><span class="p">(</span><span class="nx">myContract</span><span class="p">.</span><span class="nx">runtimeBytecode</span><span class="p">),</span> <span class="nx">registerNewCustomer</span><span class="p">,</span> <span class="nx">myKey</span><span class="p">.</span><span class="nx">address</span><span class="p">);</span>

<span class="p">...</span>

<span class="k">if</span><span class="p">(</span> <span class="nx">unsubscribe</span><span class="p">(</span><span class="nx">subscription</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">)</span> <span class="nx">console</span><span class="p">.</span><span class="nx">error</span><span class="p">(</span><span class="s2">&quot;failed to unsubscribe&quot;</span><span class="p">);</span>
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="close">
<h3>close<a class="headerlink" href="#close" title="Permalink to this headline">¶</a></h3>
<p>Closes the connection to the blockchain.  Should be called on program exit if any blockchain functions have been used.</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="nx">close</span><span class="p">();</span>
</pre></div>
</div>
<div class="section" id="id130">
<h4>Throws<a class="headerlink" href="#id130" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">BlockchainError</span></code> - if the connection cannot be closed.</p></li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="datona-vault.html" class="btn btn-neutral float-right" title="datona-vault" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="howto.html" class="btn btn-neutral float-left" title="How To Use" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Datona Labs

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>